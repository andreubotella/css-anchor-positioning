<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS Anchor Positioning Polyfill Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/open-props" />
    <link rel="stylesheet" href="/demo.css" />
    <link rel="stylesheet" href="/anchor.css" />
    <link
      rel="stylesheet"
      data-style-anchor-positioning
      href="/anchor-positioning.css"
    />
    <link rel="stylesheet" href="/position-fallback.css" />
    <link rel="stylesheet" href="/anchor-scroll.css" />
    <link rel="stylesheet" href="/anchor-size.css" />
    <link rel="stylesheet" href="/anchor-math.css" />
    <style>
      #my-anchor-style-tag {
        anchor-name: --my-anchor-style-tag;
      }

      #my-floating-style-tag {
        position: absolute;
        bottom: anchor(--my-anchor-style-tag start);
        right: anchor(--my-anchor-style-tag left);
      }
    </style>
    <script type="module">
      import polyfill from '/src/index-fn.ts';

      if (!('anchorName' in document.documentElement.style)) {
        document
          .getElementById('apply-polyfill')
          .addEventListener('click', () =>
            polyfill().then((rules) => console.log(rules)),
          );
      } else {
        console.log(
          'anchor-positioning is supported in this browser; polyfill skipped.',
        );
      }
    </script>
  </head>
  <body>
    <header>
      <h1>CSS Anchor Positioning Polyfill</h1>
      <p>
        See also:
        <a
          href="https://github.com/web-platform-tests/wpt/tree/master/css/css-anchor-position"
          target="_blank"
          rel="noopener noreferrer"
          >WPT examples</a
        >
      </p>
    </header>
    <div data-controls="apply-polyfill">
      <button id="apply-polyfill">Apply Polyfill</button>
    </div>

    <section id="anchor-positioning" class="demo-item">
      <h2>
        <a href="#anchor-positioning" aria-hidden="true">ðŸ”—</a> Anchor
        Positioning via anchor() [stylesheet]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-floating-positioning" class="float">Floating</div>
        <div id="my-anchor-positioning" class="anchor">Anchor</div>
      </div>
    </section>
    <section id="anchor-style-tag" class="demo-item">
      <h2>
        <a href="#anchor-style-tag" aria-hidden="true">ðŸ”—</a>
        Anchor Positioning via anchor() [&lt;style&gt; tag]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-floating-style-tag" class="float">Floating</div>
        <div id="my-anchor-style-tag" class="anchor">Anchor</div>
      </div>
    </section>
    <section id="anchor-inline" class="demo-item">
      <h2>
        <a href="#anchor-inline" aria-hidden="true">ðŸ”—</a>
        Anchor Positioning via anchor() [inline styles]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div
          id="my-floating-inline"
          class="float"
          style="
            position: absolute;
            top: anchor(--my-anchor-in-line bottom);
            right: anchor(--my-anchor-in-line right);
          "
        >
          Floating
        </div>
        <div
          id="my-anchor-inline"
          class="anchor"
          style="anchor-name: --my-anchor-in-line"
        >
          Anchor
        </div>
      </div>
    </section>
    <section id="position-fallback" class="demo-item">
      <h2>
        <a href="#position-fallback" aria-hidden="true">ðŸ”—</a>
        Anchor Positioning via position-fallback
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-floating-fallback" class="float">Floating</div>
        <div id="my-anchor-fallback" class="anchor">Anchor</div>
      </div>
    </section>
    <section id="anchor-scroll" class="demo-item">
      <h2>
        <a href="#anchor-scroll" aria-hidden="true">ðŸ”—</a>
        Anchor Positioning [with scroll]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="scroll-container">
          <div id="scroll-contents">
            <div id="placefiller-above-anchor"></div>
            <div id="placefiller-before-anchor"></div>
            <span id="scroll-anchor" class="anchor">Anchor</span>
            <div id="inner-anchored" class="float">Inner-anchored</div>
          </div>
        </div>
        <div id="outer-anchored" class="float">Outer-anchored</div>
      </div>
    </section>
    <section id="custom-prop" class="demo-item">
      <h2>
        <a href="#custom-prop" aria-hidden="true">ðŸ”—</a>
        Anchor() [used in CSS custom property]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor" class="anchor">Anchor</div>
        <div id="my-floating" class="float">Floating</div>
      </div>
    </section>
    <section id="math-function" class="demo-item">
      <h2>
        <a href="#math-function" aria-hidden="true">ðŸ”—</a>
        Anchor() [used in math function]
      </h2>
      <div style="position: relative" class="demo-elements">
        <div id="my-anchor-math" class="anchor">Anchor</div>
        <div id="my-floating-math" class="float">Floating</div>
      </div>
    </section>
    <section id="anchor-size" class="demo-item">
      <h2>
        <a href="#anchor-size" aria-hidden="true">ðŸ”—</a>
        Anchor Size
      </h2>
      <div id="my-anchor-size" class="anchor" class="demo-elements">Anchor</div>
      <div id="my-floating-size" class="float">Floating</div>
    </section>
  </body>
</html>
