<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSS Anchor Positioning Polyfill Demo</title>
    <link type="text/css" href="/demo.css" />
    <link rel="stylesheet" href="/anchor.css" />
    <link
      rel="stylesheet"
      data-style-anchor-positioning
      href="/anchor-positioning.css"
    />
    <link rel="stylesheet" href="/position-fallback.css" />
    <link rel="stylesheet" href="/anchor-scroll.css" />
    <link rel="stylesheet" href="/anchor-size.css" />
    <link rel="stylesheet" href="/anchor-math.css" />
    <style>
      #my-anchor-style-tag {
        anchor-name: --my-anchor-style-tag;
        background: orange;
        margin-left: 100px;
        margin-top: 100px;
        width: 100px;
        height: 100px;
      }

      #my-floating-style-tag {
        position: absolute;
        bottom: anchor(--my-anchor-style-tag start);
        right: anchor(--my-anchor-style-tag left);
        background: green;
      }
    </style>
    <script type="module">
      import polyfill from '/src/index-fn.ts';

      const btn = document.getElementById('apply-polyfill');
      btn.addEventListener('click', () =>
        polyfill().then((rules) => console.log(rules)),
      );
    </script>
  </head>
  <body>
    <h1>CSS Anchor Positioning Polyfill</h1>

    <p>
      See also:
      <a
        href="https://chromium.googlesource.com/chromium/src/+/main/third_party/blink/web_tests/wpt_internal/css/css-anchor-position"
        >WPT examples</a
      >
    </p>

    <button id="apply-polyfill">Apply Polyfill</button>

    <h2>Anchor Positioning via anchor() (stylesheet)</h2>
    <div style="position: relative">
      <div id="my-floating-positioning">Floating</div>
      <div id="my-anchor-positioning">Anchor</div>
    </div>

    <h2>Anchor Positioning via anchor() (style tag)</h2>
    <div style="position: relative">
      <div id="my-floating-style-tag">Floating</div>
      <div id="my-anchor-style-tag">Anchor</div>
    </div>

    <h2>Anchor Positioning via anchor() (inline)</h2>
    <div style="position: relative">
      <div
        id="my-floating-in-line"
        class="floating-class"
        style="
          position: absolute;
          top: anchor(--my-anchor-in-line end);
          left: anchor(--my-anchor-in-line end);
          background: green;
        "
      >
        Floating
      </div>
      <div
        id="my-anchor-in-line"
        style="
          anchor-name: --my-anchor-in-line;
          background: orange;
          margin-left: 100px;
          margin-top: 100px;
          width: 100px;
          height: 100px;
        "
      >
        Anchor
      </div>
    </div>

    <h2>Anchor Positioning via position-fallback</h2>
    <div style="position: relative">
      <div id="my-floating-fallback">Floating</div>
      <div id="my-anchor-fallback">Anchor</div>
    </div>

    <h2>Anchor Positioning (with scroll)</h2>
    <div style="position: relative">
      <div id="scroll-container">
        <div id="scroll-contents">
          <div id="placefiller-above-anchor"></div>
          <div id="placefiller-before-anchor"></div>
          <span id="scroll-anchor">anchor</span>
          <div id="inner-anchored">inner-anchored</div>
        </div>
      </div>
      <div id="outer-anchored">outer-anchored</div>
    </div>

    <h2>Anchor() (used in CSS custom property)</h2>
    <div style="position: relative">
      <div id="my-anchor">Anchor</div>
      <div id="my-floating">Floating</div>
    </div>

    <h2>Anchor() (used in math function)</h2>
    <div style="position: relative">
      <div id="my-anchor-math">Anchor</div>
      <div id="my-floating-math">Floating</div>
    </div>

    <h2>Anchor Size</h2>
    <div id="my-anchor-size">Anchor</div>
    <div id="my-floating-size">Floating</div>
  </body>
</html>
